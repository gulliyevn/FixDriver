# üîó –ê–ù–ê–õ–ò–ó –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô FIXDRIVE

## üìä **–û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô**

### **–°–µ—Ä–≤–∏—Å—ã –∏ –∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

#### **1. AuthService (394 —Å—Ç—Ä–æ–∫)**
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `JWTService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏
- `APIClient` - HTTP –∑–∞–ø—Ä–æ—Å—ã
- `ENV_CONFIG` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:**
- `AuthContext` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `LoginScreen` - —ç–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞
- `RegisterScreen` - —ç–∫—Ä–∞–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `SettingsScreen` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### **2. JWTService (430 —Å—Ç—Ä–æ–∫)**
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `AsyncStorage` - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- `ENV_CONFIG` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:**
- `AuthService` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `APIClient` - HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏
- `ProfileService` - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### **3. MapService (413 —Å—Ç—Ä–æ–∫)**
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `expo-location` - –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è
- `AsyncStorage` - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- `DistanceCalculationService` - —Ä–∞—Å—á–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:**
- `MapView` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã
- `FixDriveMapInput` - –≤–≤–æ–¥ –∞–¥—Ä–µ—Å–æ–≤
- `OrdersMapScreen` - –∫–∞—Ä—Ç–∞ –∑–∞–∫–∞–∑–æ–≤
- `AddressAutocomplete` - –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ

#### **4. OrderService (374 —Å—Ç—Ä–æ–∫)**
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `APIClient` - HTTP –∑–∞–ø—Ä–æ—Å—ã
- `MapService` - –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è
- `mockOrders` - –º–æ–∫ –¥–∞–Ω–Ω—ã–µ

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:**
- `DriversScreen` - —Å–ø–∏—Å–æ–∫ –≤–æ–¥–∏—Ç–µ–ª–µ–π
- `OrdersMapScreen` - –∫–∞—Ä—Ç–∞ –∑–∞–∫–∞–∑–æ–≤
- `ChatService` - —á–∞—Ç –∑–∞–∫–∞–∑–æ–≤

#### **5. ChatService (272 —Å—Ç—Ä–æ–∫)**
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `OrderService` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö
- `mockChats` - –º–æ–∫ –¥–∞–Ω–Ω—ã–µ

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:**
- `ChatScreen` - —ç–∫—Ä–∞–Ω —á–∞—Ç–∞
- `ChatListScreen` - —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
- `SupportChatScreen` - —á–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

#### **6. ProfileService (129 —Å—Ç—Ä–æ–∫)**
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `APIClient` - HTTP –∑–∞–ø—Ä–æ—Å—ã
- `JWTService` - —Ç–æ–∫–µ–Ω—ã
- `ENV_CONFIG` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:**
- `ProfileContext` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ—Ñ–∏–ª—è
- `EditClientProfileScreen` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- `SettingsScreen` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

## üîÑ **–¶–ò–ö–õ–ò–ß–ï–°–ö–ò–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò**

### **–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã:**

#### **1. AuthService ‚Üî JWTService**
```
AuthService ‚Üí JWTService (–¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤)
JWTService ‚Üí AuthService (–¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
```

#### **2. OrderService ‚Üî MapService**
```
OrderService ‚Üí MapService (–¥–ª—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏)
MapService ‚Üí OrderService (–¥–ª—è –∑–∞–∫–∞–∑–æ–≤)
```

#### **3. ChatService ‚Üî OrderService**
```
ChatService ‚Üí OrderService (–¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–∫–∞–∑–∞—Ö)
OrderService ‚Üí ChatService (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
```

---

## üìÅ **–ê–ù–ê–õ–ò–ó –ö–û–ú–ü–û–ù–ï–ù–¢–û–í**

### **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:**

#### **1. BalanceScreen.tsx (619 —Å—Ç—Ä–æ–∫)**
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `useBalance` - —Ö—É–∫ –±–∞–ª–∞–Ω—Å–∞
- `useAuth` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `BalanceCardDecoration` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã
- `BalanceTopUpHistory` - –∏—Å—Ç–æ—Ä–∏—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π
- `usePackage` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–∞–∫–µ—Ç–æ–≤
- `formatBalance` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `AsyncStorage` - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

#### **2. FixDriveMapInput.tsx (682 —Å—Ç—Ä–æ–∫–∏)**
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `MapView` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã
- `AddressAutocomplete` - –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
- `useTheme` - —Ç–µ–º–∞
- `useLanguage` - —è–∑—ã–∫
- `MapService` - —Å–µ—Ä–≤–∏—Å –∫–∞—Ä—Ç
- `placesService` - —Å–µ—Ä–≤–∏—Å –º–µ—Å—Ç

#### **3. DriversScreen.tsx (618 —Å—Ç—Ä–æ–∫)**
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `useDriversList` - —Ö—É–∫ —Å–ø–∏—Å–∫–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–π
- `DriverService` - —Å–µ—Ä–≤–∏—Å –≤–æ–¥–∏—Ç–µ–ª–µ–π
- `MapService` - —Å–µ—Ä–≤–∏—Å –∫–∞—Ä—Ç
- `ChatService` - —Å–µ—Ä–≤–∏—Å —á–∞—Ç–∞
- `useAuth` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

## üéØ **–ü–õ–ê–ù –£–°–¢–†–ê–ù–ï–ù–ò–Ø –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô**

### **1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤**

#### **AuthService ‚Üí AuthUseCase + AuthRepository**
```
domain/usecases/auth/
‚îú‚îÄ‚îÄ AuthUseCase.ts          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ LoginUseCase.ts         # –õ–æ–≥–∏–∫–∞ –≤—Ö–æ–¥–∞
‚îî‚îÄ‚îÄ RegisterUseCase.ts      # –õ–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

data/repositories/
‚îú‚îÄ‚îÄ AuthRepository.ts       # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ AuthRepositoryImpl.ts   # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
```

#### **MapService ‚Üí MapUseCase + LocationRepository**
```
domain/usecases/map/
‚îú‚îÄ‚îÄ MapUseCase.ts           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∫–∞—Ä—Ç
‚îú‚îÄ‚îÄ LocationUseCase.ts      # –õ–æ–≥–∏–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ RouteUseCase.ts         # –õ–æ–≥–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

data/repositories/
‚îú‚îÄ‚îÄ LocationRepository.ts   # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ LocationRepositoryImpl.ts # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
```

### **2. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**

#### **Repository Pattern**
```typescript
// domain/repositories/IAuthRepository.ts
export interface IAuthRepository {
  login(credentials: LoginCredentials): Promise<AuthResponse>;
  register(userData: RegisterData): Promise<AuthResponse>;
  logout(): Promise<void>;
}

// data/repositories/AuthRepositoryImpl.ts
export class AuthRepositoryImpl implements IAuthRepository {
  constructor(
    private apiClient: APIClient,
    private jwtService: JWTService
  ) {}
  
  async login(credentials: LoginCredentials): Promise<AuthResponse> {
    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
  }
}
```

### **3. Dependency Injection**

#### **Service Container**
```typescript
// core/container/ServiceContainer.ts
export class ServiceContainer {
  private static instance: ServiceContainer;
  private services: Map<string, any> = new Map();

  static getInstance(): ServiceContainer {
    if (!ServiceContainer.instance) {
      ServiceContainer.instance = new ServiceContainer();
    }
    return ServiceContainer.instance;
  }

  register<T>(key: string, service: T): void {
    this.services.set(key, service);
  }

  get<T>(key: string): T {
    return this.services.get(key);
  }
}
```

---

## üìã **–ü–õ–ê–ù –ú–ò–ì–†–ê–¶–ò–ò –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô**

### **–§–ê–ó–ê 1: –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (1 –¥–µ–Ω—å)**
- [ ] –°–æ–∑–¥–∞—Ç—å `domain/repositories/` –ø–∞–ø–∫—É
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã

### **–§–ê–ó–ê 2: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ (2-3 –¥–Ω—è)**
- [ ] –†–∞–∑–±–∏—Ç—å `AuthService` –Ω–∞ UseCase + Repository
- [ ] –†–∞–∑–±–∏—Ç—å `MapService` –Ω–∞ UseCase + Repository
- [ ] –†–∞–∑–±–∏—Ç—å `OrderService` –Ω–∞ UseCase + Repository

### **–§–ê–ó–ê 3: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ DI (1 –¥–µ–Ω—å)**
- [ ] –°–æ–∑–¥–∞—Ç—å ServiceContainer
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã

### **–§–ê–ó–ê 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –¥–µ–Ω—å)**
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ü–∏–∫–ª–æ–≤
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã

---

## üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò**

### **–¢—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è:**

#### **1. BalanceScreen.tsx**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –ø–æ–¥–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ù–û

#### **2. FixDriveMapInput.tsx**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –°–º–µ—à–∞–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- **–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ UI + –ª–æ–≥–∏–∫—É
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ù–û

#### **3. AuthService ‚Üî JWTService**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
- **–†–µ—à–µ–Ω–∏–µ:** –í–Ω–µ–¥—Ä–∏—Ç—å Repository pattern
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–ê–ñ–ù–û

#### **4. OrderService ‚Üî MapService**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–ê–ñ–ù–û

---

## üìä **–ú–ï–¢–†–ò–ö–ò –£–õ–£–ß–®–ï–ù–ò–ô**

### **–î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∞:**
- **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 3
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –∏–º–ø–æ—Ä—Ç–æ–≤:** 5 —É—Ä–æ–≤–Ω–µ–π
- **–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ —Ñ–∞–π–ª:** 8

### **–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∞:**
- **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 0
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –∏–º–ø–æ—Ä—Ç–æ–≤:** 2 —É—Ä–æ–≤–Ω—è
- **–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ —Ñ–∞–π–ª:** 3

---

## üéØ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

1. **–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞–Ω–∞–ª–∏–∑** - —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –ø–ª–∞–Ω
2. **–ù–∞—á–∞—Ç—å —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤** - —Å–æ–∑–¥–∞—Ç—å Repository pattern
3. **–†–∞–∑–±–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã** - AuthService, MapService
4. **–í–Ω–µ–¥—Ä–∏—Ç—å DI** - ServiceContainer
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** - —É–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ü–∏–∫–ª–æ–≤

**–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å —Å —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤?**
